jQuery.fn.wrapInTag=function(n){var t=n.tag||"strong",i=n.words||[],r=RegExp(i.join("|"),"gi"),u="<"+t+">$&<\/"+t+">";return this.html(function(){return $(this).text().replace(r,u)})};jQuery.fn.extend({kocTypeHead:function(n){return this.each(function(){var i=$(this),t={val:ko.observable(),inputFocused:ko.observable(!1),hint:ko.observable(),suggestions:ko.observable([]),hilight:function(n){var t=new RegExp(this.val(),"gi");return n.replace(t,"<strong>$&<\/strong>")},selectedIndex:ko.observable(-1),assignedVal:ko.observable(),select:function(n){n>=0&&n<this.suggestions().length?this.selectedIndex(n):this.selectedIndex(-1)},keyUp:function(n,t){var i=0,r;switch(t.which){case 37:break;case 38:i=-1;break;case 39:this.hint()&&this.assignedVal(this.hint());this.selectedIndex(this.suggestions().indexOf(this.assignedVal()));break;case 40:i=1;break;case 13:if(r=this.selectedIndex()==-1?this.suggestions().indexOf(this.value()):this.selectedIndex(),r==-1)return!1;this.selectedIndex(r);this.assignedVal(this.suggestions()[this.selectedIndex()]);this.val(this.suggestions()[this.selectedIndex()]);this.hilight(this.val());this.hint(null);this.inputFocused(!1);default:return!0}return i!=0&&this.select(this.selectedIndex()+i),!1}};t.val.subscribe(function(n){if(t.hint(null),t.assignedVal()!=null)return t.assignedVal(null);if(!n||n.length<3)return clearTimeout(u),r&&r.abort(),t.suggestions([]);u!=null&&clearTimeout(u);u=setTimeout(function(){a(n)},300)});t.value=ko.pureComputed({read:function(){return this.assignedVal()||this.val()},write:function(n){this.val(n)},owner:t});t.selectedIndex.subscribe(function(n){i.find("li.kth-suggestion").removeClass("kth-suggestion-hover");$(i.find("li.kth-suggestion")[n]).addClass("kth-suggestion-hover")});t.suggestions.subscribe(function(){for(var n=0;n<t.suggestions().length;n++)if(t.suggestions()[n].indexOf(t.val())===0){t.hint(t.suggestions()[n]);return}t.selectedIndex(-1);t.assignedVal(null)});var u=null,v=n||{},r=null,f=function(){var n=document.createElement("input");n.classList.add("kth-input-hint");n.type="text";$(n).attr("data-bind","value: hint");i.append(n)},e=function(){var n=document.createElement("input");n.classList.add("kth-input-value");n.type="text";$(n).attr("data-bind","value: value, hasFocus: inputFocused, valueUpdate: 'afterkeydown', event: {keyup: keyUp}");i.append(n)},o=function(){var n=document.createElement("pre");$(n).css({visibility:"hidden","font-size":"1.2em",padding:"0",margin:"0"});n.innerHTML="&mbsp;";i.append(n)},s=function(){var n=document.createElement("li");n.classList.add("kth-suggestion");i.find(".kth-suggestions").append(n);$(n).attr("data-bind","html: $parent.hilight(suggestion)")},h=function(){var n=document.createElement("ul");n.classList.add("kth-suggestions");$(n).attr("data-bind","foreach: { data: suggestions, as: 'suggestion' }");i.find(".kth-menu").append(n);s()},c=function(){var n=document.createElement("div");n.classList.add("kth-menu");$(n).attr("data-bind","css: {'kth-menu-open': suggestions().length > 0 && inputFocused}");i.append(n);h()},l=function(){f();e();o();c();ko.applyBindings(t,i[0])},a=function(i){var u,f;r!=null&&r.abort();u={};for(f in n.dataLoaderParams||{})u[f]=n.dataLoaderParams[f];u.data=u.data.replace("@Key",i);r=$.ajax(u).done(function(i){t.suggestions(n.prepareData(i))}).error(function(){})};return l(),{}})}});
//# sourceMappingURL=koc-typehead-v1.0.min.js.map
